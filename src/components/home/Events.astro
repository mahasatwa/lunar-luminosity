---
import type { Event } from '../../utils/contentful';

interface Props {
  events: Event[];
}

const { events } = Astro.props;

function formatDateTime(date: string, time: string): string {
  const eventDate = new Date(`${date}T${time}`);
  return eventDate.toLocaleDateString('id-ID', {
    weekday: 'long',
    year: 'numeric',
    month: 'long',
    day: 'numeric',
    hour: '2-digit',
    minute: '2-digit',
  });
}

const eventTypeIcons = {
  openHouse: 'ğŸ«',
  infoSession: 'â„¹ï¸',
  webinar: 'ğŸ’»',
  entranceTest: 'ğŸ“',
};
---

<section class="py-16 bg-white">
  <div class="container">
    <div class="text-center mb-12">
      <h2 class="text-4xl font-bold mb-4">Acara Penerimaan & Kampus</h2>
    </div>

    <div class="grid md:grid-cols-2 gap-8 mb-12">
      {
        events.map((event) => (
          <div class="bg-gray-50 rounded-lg p-6 shadow-sm">
            <div class="flex items-start gap-4">
              <div class="text-4xl">{eventTypeIcons[event.type]}</div>
              <div>
                <h3 class="text-xl font-bold mb-2">{event.title}</h3>
                <time class="text-sm text-gray-500 mb-2 block">
                  {formatDateTime(event.date, event.time)}
                </time>
                <p class="text-gray-600 mb-4">{event.description}</p>
                <a
                  href={event.registrationLink}
                  class="inline-block bg-primary text-white px-6 py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors"
                >
                  Daftar Sekarang
                </a>
              </div>
            </div>
          </div>
        ))
      }
    </div>

    <div class="text-center">
      <a
        href="/events"
        class="inline-block bg-white border-2 border-primary text-primary px-8 py-3 rounded-lg font-medium hover:bg-primary hover:text-white transition-colors"
      >
        Lihat Semua Jadwal Acara
      </a>
    </div>
  </div>
</section> 