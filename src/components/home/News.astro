---
import type { News } from '../../utils/contentful';
import { getOptimizedImageUrl } from '../../utils/cloudinary';

interface Props {
  news: News[];
}

const { news } = Astro.props;

function formatDate(dateStr: string): string {
  return new Date(dateStr).toLocaleDateString('id-ID', {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
  });
}
---

<section class="py-16 bg-gray-50">
  <div class="container">
    <div class="text-center mb-12">
      <h2 class="text-4xl font-bold mb-4">Berita & Kisah Mahasiswa/Alumni</h2>
    </div>

    <div class="grid md:grid-cols-3 gap-8 mb-12">
      {
        news.map((item) => {
          const optimizedImageUrl = getOptimizedImageUrl(item.imageUrl, {
            width: 400,
            height: 300,
            crop: 'fill',
            quality: 80,
            format: 'auto',
          });

          return (
            <article class="bg-white rounded-lg overflow-hidden shadow-sm">
              <img
                src={optimizedImageUrl}
                alt={item.title}
                class="w-full h-48 object-cover"
                width="400"
                height="300"
              />
              <div class="p-6">
                <time class="text-sm text-gray-500 mb-2 block">
                  {formatDate(item.date)}
                </time>
                <h3 class="text-xl font-bold mb-2">{item.title}</h3>
                <p class="text-gray-600 mb-4">{item.summary}</p>
                <a
                  href={`/news/${item.slug}`}
                  class="text-primary hover:text-blue-700 font-medium"
                >
                  Baca Selengkapnya â†’
                </a>
              </div>
            </article>
          );
        })
      }
    </div>

    <div class="text-center">
      <a
        href="/news"
        class="inline-block bg-white border-2 border-primary text-primary px-8 py-3 rounded-lg font-medium hover:bg-primary hover:text-white transition-colors"
      >
        Lihat Semua Berita
      </a>
    </div>
  </div>
</section> 