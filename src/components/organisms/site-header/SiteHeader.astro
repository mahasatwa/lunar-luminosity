---
// src/components/organisms/site-header/SiteHeader.astro
import Logo from '../../atoms/logo/Logo.astro';
import Button from '../../atoms/button/Button.astro';
import Icon from '../../atoms/icons/Icon.astro';
import NavLink from '../../molecules/nav-link/NavLink.astro';
import type { NavItem } from '../../molecules/nav-link/NavLink.astro';

// Mengimpor data navigasi
import { globalNavigationData } from '../../../data/NavigationData.ts';
---

<header class="sticky top-0 bg-white/80 backdrop-blur-lg shadow-sm z-50">
    <div class="container mx-auto px-6 flex items-center justify-between h-20">
        <div class="flex-shrink-0">
            <a href="/" aria-label="Beranda STIE Dwimulya">
                <Logo src="/logo-primary.svg" alt="STIE Dwimulya Logo" />
            </a>
        </div>

        {/* Hamburger Menu Trigger (Checkbox Hack) */}
        <input type="checkbox" id="menu-toggle" class="hidden" />
        <label for="menu-toggle" class="md:hidden cursor-pointer z-50">
            <Icon name="tabler:menu-2" class="w-8 h-8" />
        </label>

        {/* Desktop Navigation */}
        <nav class="hidden md:flex items-center space-x-2">
            <ul class="flex space-x-2">
                {globalNavigationData.map((item: NavItem) => (
                    <NavLink {...item} />
                ))}
            </ul>
        </nav>

        <div class="hidden md:block">
            <Button href="/penerimaan" label="Pendaftaran" />
        </div>

        {/* Mobile Navigation Panel */}
        <div id="mobile-menu" class="fixed top-0 left-0 w-full h-full bg-white transform -translate-x-full transition-transform duration-300 ease-in-out z-40 md:hidden">
            <div class="p-6 pt-24">
                <nav>
                    <ul class="flex flex-col space-y-4">
                        {globalNavigationData.map((item: NavItem) => (
                            <li>
                                <a href={item.href || '#'} class="text-lg font-semibold text-gray-800">{item.text}</a>
                                {item.submenu && (
                                    <ul class="mt-2 pl-4 space-y-2">
                                        {item.submenu.map(subItem => (
                                            <li><a href={subItem.href} class="text-gray-600">{subItem.text}</a></li>
                                        ))}
                                    </ul>
                                )}
                            </li>
                        ))}
                    </ul>
                </nav>
                <div class="mt-8">
                    <Button href="/penerimaan" label="Pendaftaran" />
                </div>
            </div>
        </div>
    </div>
</header>

<style>
    /* "Checkbox Hack" untuk menu mobile */
    #menu-toggle:checked ~ #mobile-menu {
        transform: translateX(0);
    }

    #menu-toggle:checked ~ label[for="menu-toggle"] {
        /* Opsi: Ubah ikon hamburger menjadi 'X' saat menu terbuka */
        /* Ini memerlukan penambahan ikon kedua yang hanya terlihat saat dicentang */
    }
</style>
